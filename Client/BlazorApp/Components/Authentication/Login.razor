@page "/login" 
@using BlazorApp.Auth
@using System.Security.Claims
@inject AuthenticationStateProvider AuthProvider
@inject NavigationManager navMgr 
<AuthorizeView> 
    <NotAuthorized> 
        <h3>Please login</h3> 
        <label>User name:</label> 
        <input type="text" @bind="userName"/> 
        <label>Password:</label> 
        <input type="password" @bind="password"/> 
        @if (!string.IsNullOrEmpty(errorLabel)) 
        { 
            <label style="color: red"> 
                @errorLabel
            </label> 
        } 
        <button @onclick="LoginAsync">Log in</button> 
    </NotAuthorized> 
    <Authorized> 
        <h3>Hello, @context.User.Identity.Name</h3> 
        <p>@context.User.Claims.First(claim => claim.Type.Equals(ClaimTypes.Role)).Value</p>
        <p>
            Your claims include:
            <ol>
                @foreach (Claim claim in context.User.Claims)
                {
                    <li>
                        <label>@claim.Type: @claim.Value</label>
                    </li>
                }
            </ol>
        </p>
    </Authorized> 
</AuthorizeView>
@code { 
    private string userName; 
    private string password; 
    private string errorLabel; 
    private async Task LoginAsync() { 
        errorLabel = ""; 
        try { 
            await ((SimpleAuthProvider)AuthProvider).LoginAsync(userName, password); 
            navMgr.NavigateTo("/"); 
        } catch (Exception e) { 
            Console.WriteLine(e); 
            errorLabel = $"Error: {e.Message}"; 
        } 
    } 
}